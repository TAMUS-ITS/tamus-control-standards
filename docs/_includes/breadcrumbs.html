<nav>
{% assign dirtree = page.url | split: "/" %}
{% for i in (1..dirtree.size) %}
  {% assign curpath = dirtree | slice: 0, i | join: "/" %}
  {% if i < dirtree.size or page.name == "index.html" or page.name == "index.md" %}
    {% assign curpath = curpath | append: "/" %}
  {% endif %}
  {% for sitewalk in site.pages %}
    {% assign walkurl = sitewalk.url %}
    {% if curpath == walkurl %}
      {% if i < dirtree.size %}
        / <a href="{{ sitewalk.url }}">{{ sitewalk.breadcrumb_text | default: sitewalk.title }}</a>
      {% endif %}
      {% unless i < dirtree.size %}
        / {{ sitewalk.breadcrumb_text | default: sitewalk.title }}
      {% endunless %}
    {% endif %}
  {% endfor %}
{% endfor %}
</nav>
